"use strict";const U=require("electron"),W=require("path"),Re=require("child_process"),X=require("fs"),_t=require("constants"),ce=require("os"),je=require("assert"),Ot=require("events");require("util");function Te(p){const E=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(p){for(const k in p)if(k!=="default"){const R=Object.getOwnPropertyDescriptor(p,k);Object.defineProperty(E,k,R.get?R:{enumerable:!0,get:()=>p[k]})}}return E.default=p,Object.freeze(E)}const Ie=Te(W),kt=Te(X),Dt=Te(ce);function At(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var V={exports:{}},ve,Ue;function Me(){if(Ue)return ve;Ue=1;const p=X;function E(x){return new Promise((D,A)=>{p.unlink(x,function(I){return I?A(I):D()})})}function k(x){return new Promise((D,A)=>{p.readFile(x,function(I,b){if(I)return A(I);D(b)})})}function R(x){return new Promise((D,A)=>{k(x).then(I=>{E(x).then(()=>D(I)).catch(A)}).catch(A)})}function w(x){return new Promise((D,A)=>{x.listDisplays().then(I=>{const b=I.map(({id:O})=>x({screen:O}));Promise.all(b).then(D).catch(A)}).catch(A)})}return ve={unlinkP:E,readFileP:k,readAndUnlinkP:R,defaultAll:w},ve}var me,Ye;function Pt(){if(Ye)return me;Ye=1;const p=Re.exec,E=W,k=Me().defaultAll,R=`Screen 0: minimum 320 x 200, current 5760 x 1080, maximum 8192 x 8192
eDP-1 connected (normal left inverted right x axis y axis)
  2560x1440     60.00 +
  1920x1440     60.00
  1856x1392     60.01
  1792x1344     60.01
  1920x1200     59.95
  1920x1080     59.93
  1600x1200     60.00
  1680x1050     59.95    59.88
  1600x1024     60.17
  1400x1050     59.98
  1280x1024     60.02
  1440x900      59.89
  1280x960      60.00
  1360x768      59.80    59.96
  1152x864      60.00
  1024x768      60.04    60.00
  960x720       60.00
  928x696       60.05
  896x672       60.01
  960x600       60.00
  960x540       59.99
  800x600       60.00    60.32    56.25
  840x525       60.01    59.88
  800x512       60.17
  700x525       59.98
  640x512       60.02
  720x450       59.89
  640x480       60.00    59.94
  680x384       59.80    59.96
  576x432       60.06
  512x384       60.00
  400x300       60.32    56.34
  320x240       60.05
DP-1 disconnected (normal left inverted right x axis y axis)
HDMI-1 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 476mm x 268mm
  1920x1080     60.00*+  50.00    50.00    59.94
  1680x1050     59.88
  1600x900      60.00
  1280x1024     60.02
  1440x900      59.90
  1280x800      59.91
  1280x720      60.00    50.00    59.94
  1024x768      60.00
  800x600       60.32
  720x576       50.00
  720x480       60.00    59.94
  640x480       60.00    59.94
  720x400       70.08
DP-2 disconnected (normal left inverted right x axis y axis)
HDMI-2 disconnected (normal left inverted right x axis y axis)
DP-2-1 connected 1920x1080+3840+0 (normal left inverted right x axis y axis) 476mm x 268mm
  1920x1080     60.00*+  50.00    50.00    59.94
  1680x1050     59.88
  1600x900      60.00
  1280x1024     60.02
  1440x900      59.90
  1280x800      59.91
  1280x720      60.00    50.00    59.94
  1024x768      60.00
  800x600       60.32
  720x576       50.00
  720x480       60.00    59.94
  640x480       60.00    59.94
  720x400       70.08
DP-2-2 connected 1920x1080+1920+0 (normal left inverted right x axis y axis) 476mm x 268mm
  1920x1080     60.00*+  50.00    50.00    59.94
  1680x1050     59.88
  1600x900      60.00
  1280x1024     60.02
  1440x900      59.90
  1280x800      59.91
  1280x720      60.00    50.00    59.94
  1024x768      60.00
  800x600       60.32
  720x576       50.00
  720x480       60.00    59.94
  640x480       60.00    59.94
  720x400       70.08
DP-2-3 disconnected (normal left inverted right x axis y axis)`;function w(b){return b.split(`
`).filter(O=>O.indexOf(" connected ")>0).filter(O=>O.search(/\dx\d/)>0).map((O,S)=>{const s=O.split(" "),d=s[0],y=s[2]==="primary",i=y?s[3]:s[2],u=i.split(/[x+]/),t=+u[0],r=+u[1],o=+u[2],e=+u[3];return{width:t,height:r,name:d,id:d,offsetX:o,offsetY:e,primary:y,crop:i}})}function x(){return new Promise((b,O)=>{p("xrandr --current",(S,s)=>S?O(S):b(w(s)))})}function D(b){let O=0;return b.forEach(S=>{O+=S.height*S.width}),O}function A(b){switch(E.extname(b)){case".jpg":case".jpeg":return"jpeg";case".png":return"png"}return"jpeg"}function I(b={}){return new Promise((O,S)=>{x().then(s=>{const d=s.find(b.screen?r=>r.id===b.screen:r=>r.primary||r.id==="default")||s[0],y=b.filename?b.filename.replace(/"/g,'\\"'):"-",i=b.filename?{}:{encoding:"buffer",maxBuffer:D(s)},u=b.format||A(y);let t="";switch(b.linuxLibrary){case"scrot":t=`scrot "${y}" -e -z "echo \\"${y}\\""`;break;case"imagemagick":default:t=`import -silent -window root -crop ${d.crop} -screen ${u}:"${y}" `;break}p(t,i,(r,o)=>r?S(r):O(b.filename?E.resolve(b.filename):o))})})}return I.listDisplays=x,I.parseDisplaysOutput=w,I.EXAMPLE_DISPLAYS_OUTPUT=R,I.all=()=>k(I),me=I,me}var re={exports:{}},ne={},We;function It(){if(We)return ne;We=1;var p=W,E=process.platform==="win32",k=X,R=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function w(){var I;if(R){var b=new Error;I=O}else I=S;return I;function O(s){s&&(b.message=s.message,s=b,S(s))}function S(s){if(s){if(process.throwDeprecation)throw s;if(!process.noDeprecation){var d="fs: missing callback "+(s.stack||s.message);process.traceDeprecation?console.trace(d):console.error(d)}}}}function x(I){return typeof I=="function"?I:w()}if(p.normalize,E)var D=/(.*?)(?:[\/\\]+|$)/g;else var D=/(.*?)(?:[\/]+|$)/g;if(E)var A=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else var A=/^[\/]*/;return ne.realpathSync=function(b,O){if(b=p.resolve(b),O&&Object.prototype.hasOwnProperty.call(O,b))return O[b];var S=b,s={},d={},y,i,u,t;r();function r(){var c=A.exec(b);y=c[0].length,i=c[0],u=c[0],t="",E&&!d[u]&&(k.lstatSync(u),d[u]=!0)}for(;y<b.length;){D.lastIndex=y;var o=D.exec(b);if(t=i,i+=o[0],u=t+o[1],y=D.lastIndex,!(d[u]||O&&O[u]===u)){var e;if(O&&Object.prototype.hasOwnProperty.call(O,u))e=O[u];else{var a=k.lstatSync(u);if(!a.isSymbolicLink()){d[u]=!0,O&&(O[u]=u);continue}var f=null;if(!E){var h=a.dev.toString(32)+":"+a.ino.toString(32);s.hasOwnProperty(h)&&(f=s[h])}f===null&&(k.statSync(u),f=k.readlinkSync(u)),e=p.resolve(t,f),O&&(O[u]=e),E||(s[h]=f)}b=p.resolve(e,b.slice(y)),r()}}return O&&(O[S]=b),b},ne.realpath=function(b,O,S){if(typeof S!="function"&&(S=x(O),O=null),b=p.resolve(b),O&&Object.prototype.hasOwnProperty.call(O,b))return process.nextTick(S.bind(null,null,O[b]));var s=b,d={},y={},i,u,t,r;o();function o(){var c=A.exec(b);i=c[0].length,u=c[0],t=c[0],r="",E&&!y[t]?k.lstat(t,function(n){if(n)return S(n);y[t]=!0,e()}):process.nextTick(e)}function e(){if(i>=b.length)return O&&(O[s]=b),S(null,b);D.lastIndex=i;var c=D.exec(b);return r=u,u+=c[0],t=r+c[1],i=D.lastIndex,y[t]||O&&O[t]===t?process.nextTick(e):O&&Object.prototype.hasOwnProperty.call(O,t)?h(O[t]):k.lstat(t,a)}function a(c,n){if(c)return S(c);if(!n.isSymbolicLink())return y[t]=!0,O&&(O[t]=t),process.nextTick(e);if(!E){var l=n.dev.toString(32)+":"+n.ino.toString(32);if(d.hasOwnProperty(l))return f(null,d[l],t)}k.stat(t,function(m){if(m)return S(m);k.readlink(t,function(v,_){E||(d[l]=_),f(v,_)})})}function f(c,n,l){if(c)return S(c);var m=p.resolve(r,n);O&&(O[l]=m),h(m)}function h(c){b=p.resolve(c,b.slice(i)),o()}},ne}var pe,Xe;function ht(){if(Xe)return pe;Xe=1,pe=A,A.realpath=A,A.sync=I,A.realpathSync=I,A.monkeypatch=b,A.unmonkeypatch=O;var p=X,E=p.realpath,k=p.realpathSync,R=process.version,w=/^v[0-5]\./.test(R),x=It();function D(S){return S&&S.syscall==="realpath"&&(S.code==="ELOOP"||S.code==="ENOMEM"||S.code==="ENAMETOOLONG")}function A(S,s,d){if(w)return E(S,s,d);typeof s=="function"&&(d=s,s=null),E(S,s,function(y,i){D(y)?x.realpath(S,s,d):d(y,i)})}function I(S,s){if(w)return k(S,s);try{return k(S,s)}catch(d){if(D(d))return x.realpathSync(S,s);throw d}}function b(){p.realpath=A,p.realpathSync=I}function O(){p.realpath=E,p.realpathSync=k}return pe}var ye,He;function Rt(){if(He)return ye;He=1,ye=function(E,k){for(var R=[],w=0;w<E.length;w++){var x=k(E[w],w);p(x)?R.push.apply(R,x):R.push(x)}return R};var p=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"};return ye}var ge,Qe;function jt(){if(Qe)return ge;Qe=1,ge=p;function p(R,w,x){R instanceof RegExp&&(R=E(R,x)),w instanceof RegExp&&(w=E(w,x));var D=k(R,w,x);return D&&{start:D[0],end:D[1],pre:x.slice(0,D[0]),body:x.slice(D[0]+R.length,D[1]),post:x.slice(D[1]+w.length)}}function E(R,w){var x=w.match(R);return x?x[0]:null}p.range=k;function k(R,w,x){var D,A,I,b,O,S=x.indexOf(R),s=x.indexOf(w,S+1),d=S;if(S>=0&&s>0){if(R===w)return[S,s];for(D=[],I=x.length;d>=0&&!O;)d==S?(D.push(d),S=x.indexOf(R,d+1)):D.length==1?O=[D.pop(),s]:(A=D.pop(),A<I&&(I=A,b=s),s=x.indexOf(w,d+1)),d=S<s&&S>=0?S:s;D.length&&(O=[I,b])}return O}return ge}var we,ze;function Tt(){if(ze)return we;ze=1;var p=Rt(),E=jt();we=S;var k="\0SLASH"+Math.random()+"\0",R="\0OPEN"+Math.random()+"\0",w="\0CLOSE"+Math.random()+"\0",x="\0COMMA"+Math.random()+"\0",D="\0PERIOD"+Math.random()+"\0";function A(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function I(t){return t.split("\\\\").join(k).split("\\{").join(R).split("\\}").join(w).split("\\,").join(x).split("\\.").join(D)}function b(t){return t.split(k).join("\\").split(R).join("{").split(w).join("}").split(x).join(",").split(D).join(".")}function O(t){if(!t)return[""];var r=[],o=E("{","}",t);if(!o)return t.split(",");var e=o.pre,a=o.body,f=o.post,h=e.split(",");h[h.length-1]+="{"+a+"}";var c=O(f);return f.length&&(h[h.length-1]+=c.shift(),h.push.apply(h,c)),r.push.apply(r,h),r}function S(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),u(I(t),!0).map(b)):[]}function s(t){return"{"+t+"}"}function d(t){return/^-?0\d/.test(t)}function y(t,r){return t<=r}function i(t,r){return t>=r}function u(t,r){var o=[],e=E("{","}",t);if(!e||/\$$/.test(e.pre))return[t];var a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(e.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(e.body),h=a||f,c=e.body.indexOf(",")>=0;if(!h&&!c)return e.post.match(/,.*\}/)?(t=e.pre+"{"+e.body+w+e.post,u(t)):[t];var n;if(h)n=e.body.split(/\.\./);else if(n=O(e.body),n.length===1&&(n=u(n[0],!1).map(s),n.length===1)){var m=e.post.length?u(e.post,!1):[""];return m.map(function(Q){return e.pre+n[0]+Q})}var l=e.pre,m=e.post.length?u(e.post,!1):[""],v;if(h){var _=A(n[0]),j=A(n[1]),M=Math.max(n[0].length,n[1].length),$=n.length==3?Math.abs(A(n[2])):1,g=y,P=j<_;P&&($*=-1,g=i);var T=n.some(d);v=[];for(var q=_;g(q,j);q+=$){var N;if(f)N=String.fromCharCode(q),N==="\\"&&(N="");else if(N=String(q),T){var L=M-N.length;if(L>0){var B=new Array(L+1).join("0");q<0?N="-"+B+N.slice(1):N=B+N}}v.push(N)}}else v=p(n,function(Y){return u(Y,!1)});for(var G=0;G<v.length;G++)for(var Z=0;Z<m.length;Z++){var F=l+v[G]+m[Z];(!r||h||F)&&o.push(F)}return o}return we}var Ee,Ve;function qe(){if(Ve)return Ee;Ve=1,Ee=d,d.Minimatch=y;var p=function(){try{return require("path")}catch{}}()||{sep:"/"};d.sep=p.sep;var E=d.GLOBSTAR=y.GLOBSTAR={},k=Tt(),R={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},w="[^/]",x=w+"*?",D="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",A="(?:(?!(?:\\/|^)\\.).)*?",I=b("().*{}+?[]^$\\!");function b(n){return n.split("").reduce(function(l,m){return l[m]=!0,l},{})}var O=/\/+/;d.filter=S;function S(n,l){return l=l||{},function(m,v,_){return d(m,n,l)}}function s(n,l){l=l||{};var m={};return Object.keys(n).forEach(function(v){m[v]=n[v]}),Object.keys(l).forEach(function(v){m[v]=l[v]}),m}d.defaults=function(n){if(!n||typeof n!="object"||!Object.keys(n).length)return d;var l=d,m=function(_,j,M){return l(_,j,s(n,M))};return m.Minimatch=function(_,j){return new l.Minimatch(_,s(n,j))},m.Minimatch.defaults=function(_){return l.defaults(s(n,_)).Minimatch},m.filter=function(_,j){return l.filter(_,s(n,j))},m.defaults=function(_){return l.defaults(s(n,_))},m.makeRe=function(_,j){return l.makeRe(_,s(n,j))},m.braceExpand=function(_,j){return l.braceExpand(_,s(n,j))},m.match=function(v,_,j){return l.match(v,_,s(n,j))},m},y.defaults=function(n){return d.defaults(n).Minimatch};function d(n,l,m){return o(l),m||(m={}),!m.nocomment&&l.charAt(0)==="#"?!1:new y(l,m).match(n)}function y(n,l){if(!(this instanceof y))return new y(n,l);o(n),l||(l={}),n=n.trim(),!l.allowWindowsEscape&&p.sep!=="/"&&(n=n.split(p.sep).join("/")),this.options=l,this.set=[],this.pattern=n,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!l.partial,this.make()}y.prototype.debug=function(){},y.prototype.make=i;function i(){var n=this.pattern,l=this.options;if(!l.nocomment&&n.charAt(0)==="#"){this.comment=!0;return}if(!n){this.empty=!0;return}this.parseNegate();var m=this.globSet=this.braceExpand();l.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,m),m=this.globParts=m.map(function(v){return v.split(O)}),this.debug(this.pattern,m),m=m.map(function(v,_,j){return v.map(this.parse,this)},this),this.debug(this.pattern,m),m=m.filter(function(v){return v.indexOf(!1)===-1}),this.debug(this.pattern,m),this.set=m}y.prototype.parseNegate=u;function u(){var n=this.pattern,l=!1,m=this.options,v=0;if(!m.nonegate){for(var _=0,j=n.length;_<j&&n.charAt(_)==="!";_++)l=!l,v++;v&&(this.pattern=n.substr(v)),this.negate=l}}d.braceExpand=function(n,l){return t(n,l)},y.prototype.braceExpand=t;function t(n,l){return l||(this instanceof y?l=this.options:l={}),n=typeof n>"u"?this.pattern:n,o(n),l.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:k(n)}var r=1024*64,o=function(n){if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>r)throw new TypeError("pattern is too long")};y.prototype.parse=a;var e={};function a(n,l){o(n);var m=this.options;if(n==="**")if(m.noglobstar)n="*";else return E;if(n==="")return"";var v="",_=!!m.nocase,j=!1,M=[],$=[],g,P=!1,T=-1,q=-1,N=n.charAt(0)==="."?"":m.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",L=this;function B(){if(g){switch(g){case"*":v+=x,_=!0;break;case"?":v+=w,_=!0;break;default:v+="\\"+g;break}L.debug("clearStateChar %j %j",g,v),g=!1}}for(var G=0,Z=n.length,F;G<Z&&(F=n.charAt(G));G++){if(this.debug("%s	%s %s %j",n,G,v,F),j&&I[F]){v+="\\"+F,j=!1;continue}switch(F){case"/":return!1;case"\\":B(),j=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",n,G,v,F),P){this.debug("  in class"),F==="!"&&G===q+1&&(F="^"),v+=F;continue}L.debug("call clearStateChar %j",g),B(),g=F,m.noext&&B();continue;case"(":if(P){v+="(";continue}if(!g){v+="\\(";continue}M.push({type:g,start:G-1,reStart:v.length,open:R[g].open,close:R[g].close}),v+=g==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",g,v),g=!1;continue;case")":if(P||!M.length){v+="\\)";continue}B(),_=!0;var Y=M.pop();v+=Y.close,Y.type==="!"&&$.push(Y),Y.reEnd=v.length;continue;case"|":if(P||!M.length||j){v+="\\|",j=!1;continue}B(),v+="|";continue;case"[":if(B(),P){v+="\\"+F;continue}P=!0,q=G,T=v.length,v+=F;continue;case"]":if(G===q+1||!P){v+="\\"+F,j=!1;continue}var Q=n.substring(q+1,G);try{RegExp("["+Q+"]")}catch{var K=this.parse(Q,e);v=v.substr(0,T)+"\\["+K[0]+"\\]",_=_||K[1],P=!1;continue}_=!0,P=!1,v+=F;continue;default:B(),j?j=!1:I[F]&&!(F==="^"&&P)&&(v+="\\"),v+=F}}for(P&&(Q=n.substr(q+1),K=this.parse(Q,e),v=v.substr(0,T)+"\\["+K[0],_=_||K[1]),Y=M.pop();Y;Y=M.pop()){var J=v.slice(Y.reStart+Y.open.length);this.debug("setting tail",v,Y),J=J.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Be,Fe,de){return de||(de="\\"),Fe+Fe+de+"|"}),this.debug(`tail=%j
   %s`,J,J,Y,v);var wt=Y.type==="*"?x:Y.type==="?"?w:"\\"+Y.type;_=!0,v=v.slice(0,Y.reStart)+wt+"\\("+J}B(),j&&(v+="\\\\");var Ce=!1;switch(v.charAt(0)){case"[":case".":case"(":Ce=!0}for(var fe=$.length-1;fe>-1;fe--){var z=$[fe],Le=v.slice(0,z.reStart),Et=v.slice(z.reStart,z.reEnd-8),$e=v.slice(z.reEnd-8,z.reEnd),ee=v.slice(z.reEnd);$e+=ee;var xt=Le.split("(").length-1,le=ee;for(G=0;G<xt;G++)le=le.replace(/\)[+*?]?/,"");ee=le;var Ge="";ee===""&&l!==e&&(Ge="$");var St=Le+Et+ee+Ge+$e;v=St}if(v!==""&&_&&(v="(?=.)"+v),Ce&&(v=N+v),l===e)return[v,_];if(!_)return h(n);var bt=m.nocase?"i":"";try{var he=new RegExp("^"+v+"$",bt)}catch{return new RegExp("$.")}return he._glob=n,he._src=v,he}d.makeRe=function(n,l){return new y(n,l||{}).makeRe()},y.prototype.makeRe=f;function f(){if(this.regexp||this.regexp===!1)return this.regexp;var n=this.set;if(!n.length)return this.regexp=!1,this.regexp;var l=this.options,m=l.noglobstar?x:l.dot?D:A,v=l.nocase?"i":"",_=n.map(function(j){return j.map(function(M){return M===E?m:typeof M=="string"?c(M):M._src}).join("\\/")}).join("|");_="^(?:"+_+")$",this.negate&&(_="^(?!"+_+").*$");try{this.regexp=new RegExp(_,v)}catch{this.regexp=!1}return this.regexp}d.match=function(n,l,m){m=m||{};var v=new y(l,m);return n=n.filter(function(_){return v.match(_)}),v.options.nonull&&!n.length&&n.push(l),n},y.prototype.match=function(l,m){if(typeof m>"u"&&(m=this.partial),this.debug("match",l,this.pattern),this.comment)return!1;if(this.empty)return l==="";if(l==="/"&&m)return!0;var v=this.options;p.sep!=="/"&&(l=l.split(p.sep).join("/")),l=l.split(O),this.debug(this.pattern,"split",l);var _=this.set;this.debug(this.pattern,"set",_);var j,M;for(M=l.length-1;M>=0&&(j=l[M],!j);M--);for(M=0;M<_.length;M++){var $=_[M],g=l;v.matchBase&&$.length===1&&(g=[j]);var P=this.matchOne(g,$,m);if(P)return v.flipNegate?!0:!this.negate}return v.flipNegate?!1:this.negate},y.prototype.matchOne=function(n,l,m){var v=this.options;this.debug("matchOne",{this:this,file:n,pattern:l}),this.debug("matchOne",n.length,l.length);for(var _=0,j=0,M=n.length,$=l.length;_<M&&j<$;_++,j++){this.debug("matchOne loop");var g=l[j],P=n[_];if(this.debug(l,g,P),g===!1)return!1;if(g===E){this.debug("GLOBSTAR",[l,g,P]);var T=_,q=j+1;if(q===$){for(this.debug("** at the end");_<M;_++)if(n[_]==="."||n[_]===".."||!v.dot&&n[_].charAt(0)===".")return!1;return!0}for(;T<M;){var N=n[T];if(this.debug(`
globstar while`,n,T,l,q,N),this.matchOne(n.slice(T),l.slice(q),m))return this.debug("globstar found match!",T,M,N),!0;if(N==="."||N===".."||!v.dot&&N.charAt(0)==="."){this.debug("dot detected!",n,T,l,q);break}this.debug("globstar swallow a segment, and continue"),T++}return!!(m&&(this.debug(`
>>> no match, partial?`,n,T,l,q),T===M))}var L;if(typeof g=="string"?(L=P===g,this.debug("string match",g,P,L)):(L=P.match(g),this.debug("pattern match",g,P,L)),!L)return!1}if(_===M&&j===$)return!0;if(_===M)return m;if(j===$)return _===M-1&&n[_]==="";throw new Error("wtf?")};function h(n){return n.replace(/\\(.)/g,"$1")}function c(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}return Ee}var ie={exports:{}},ae={exports:{}},Ze;function Mt(){return Ze||(Ze=1,typeof Object.create=="function"?ae.exports=function(E,k){k&&(E.super_=k,E.prototype=Object.create(k.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}))}:ae.exports=function(E,k){if(k){E.super_=k;var R=function(){};R.prototype=k.prototype,E.prototype=new R,E.prototype.constructor=E}}),ae.exports}var Ke;function qt(){if(Ke)return ie.exports;Ke=1;try{var p=require("util");if(typeof p.inherits!="function")throw"";ie.exports=p.inherits}catch{ie.exports=Mt()}return ie.exports}var te={exports:{}},Je;function Ne(){if(Je)return te.exports;Je=1;function p(k){return k.charAt(0)==="/"}function E(k){var R=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,w=R.exec(k),x=w[1]||"",D=!!(x&&x.charAt(1)!==":");return!!(w[2]||D)}return te.exports=process.platform==="win32"?E:p,te.exports.posix=p,te.exports.win32=E,te.exports}var H={},et;function dt(){if(et)return H;et=1,H.setopts=b,H.ownProp=p,H.makeAbs=s,H.finish=O,H.mark=S,H.isIgnored=d,H.childrenIgnored=y;function p(i,u){return Object.prototype.hasOwnProperty.call(i,u)}var E=X,k=W,R=qe(),w=Ne(),x=R.Minimatch;function D(i,u){return i.localeCompare(u,"en")}function A(i,u){i.ignore=u.ignore||[],Array.isArray(i.ignore)||(i.ignore=[i.ignore]),i.ignore.length&&(i.ignore=i.ignore.map(I))}function I(i){var u=null;if(i.slice(-3)==="/**"){var t=i.replace(/(\/\*\*)+$/,"");u=new x(t,{dot:!0})}return{matcher:new x(i,{dot:!0}),gmatcher:u}}function b(i,u,t){if(t||(t={}),t.matchBase&&u.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");u="**/"+u}i.silent=!!t.silent,i.pattern=u,i.strict=t.strict!==!1,i.realpath=!!t.realpath,i.realpathCache=t.realpathCache||Object.create(null),i.follow=!!t.follow,i.dot=!!t.dot,i.mark=!!t.mark,i.nodir=!!t.nodir,i.nodir&&(i.mark=!0),i.sync=!!t.sync,i.nounique=!!t.nounique,i.nonull=!!t.nonull,i.nosort=!!t.nosort,i.nocase=!!t.nocase,i.stat=!!t.stat,i.noprocess=!!t.noprocess,i.absolute=!!t.absolute,i.fs=t.fs||E,i.maxLength=t.maxLength||1/0,i.cache=t.cache||Object.create(null),i.statCache=t.statCache||Object.create(null),i.symlinks=t.symlinks||Object.create(null),A(i,t),i.changedCwd=!1;var r=process.cwd();p(t,"cwd")?(i.cwd=k.resolve(t.cwd),i.changedCwd=i.cwd!==r):i.cwd=r,i.root=t.root||k.resolve(i.cwd,"/"),i.root=k.resolve(i.root),process.platform==="win32"&&(i.root=i.root.replace(/\\/g,"/")),i.cwdAbs=w(i.cwd)?i.cwd:s(i,i.cwd),process.platform==="win32"&&(i.cwdAbs=i.cwdAbs.replace(/\\/g,"/")),i.nomount=!!t.nomount,t.nonegate=!0,t.nocomment=!0,t.allowWindowsEscape=!1,i.minimatch=new x(u,t),i.options=i.minimatch.options}function O(i){for(var u=i.nounique,t=u?[]:Object.create(null),r=0,o=i.matches.length;r<o;r++){var e=i.matches[r];if(!e||Object.keys(e).length===0){if(i.nonull){var a=i.minimatch.globSet[r];u?t.push(a):t[a]=!0}}else{var f=Object.keys(e);u?t.push.apply(t,f):f.forEach(function(h){t[h]=!0})}}if(u||(t=Object.keys(t)),i.nosort||(t=t.sort(D)),i.mark){for(var r=0;r<t.length;r++)t[r]=i._mark(t[r]);i.nodir&&(t=t.filter(function(h){var c=!/\/$/.test(h),n=i.cache[h]||i.cache[s(i,h)];return c&&n&&(c=n!=="DIR"&&!Array.isArray(n)),c}))}i.ignore.length&&(t=t.filter(function(h){return!d(i,h)})),i.found=t}function S(i,u){var t=s(i,u),r=i.cache[t],o=u;if(r){var e=r==="DIR"||Array.isArray(r),a=u.slice(-1)==="/";if(e&&!a?o+="/":!e&&a&&(o=o.slice(0,-1)),o!==u){var f=s(i,o);i.statCache[f]=i.statCache[t],i.cache[f]=i.cache[t]}}return o}function s(i,u){var t=u;return u.charAt(0)==="/"?t=k.join(i.root,u):w(u)||u===""?t=u:i.changedCwd?t=k.resolve(i.cwd,u):t=k.resolve(u),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function d(i,u){return i.ignore.length?i.ignore.some(function(t){return t.matcher.match(u)||!!(t.gmatcher&&t.gmatcher.match(u))}):!1}function y(i,u){return i.ignore.length?i.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(u))}):!1}return H}var xe,tt;function Nt(){if(tt)return xe;tt=1,xe=O,O.GlobSync=S;var p=ht(),E=qe();E.Minimatch,pt().Glob;var k=W,R=je,w=Ne(),x=dt(),D=x.setopts,A=x.ownProp,I=x.childrenIgnored,b=x.isIgnored;function O(s,d){if(typeof d=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new S(s,d).found}function S(s,d){if(!s)throw new Error("must provide pattern");if(typeof d=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof S))return new S(s,d);if(D(this,s,d),this.noprocess)return this;var y=this.minimatch.set.length;this.matches=new Array(y);for(var i=0;i<y;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}return S.prototype._finish=function(){if(R.ok(this instanceof S),this.realpath){var s=this;this.matches.forEach(function(d,y){var i=s.matches[y]=Object.create(null);for(var u in d)try{u=s._makeAbs(u);var t=p.realpathSync(u,s.realpathCache);i[t]=!0}catch(r){if(r.syscall==="stat")i[s._makeAbs(u)]=!0;else throw r}})}x.finish(this)},S.prototype._process=function(s,d,y){R.ok(this instanceof S);for(var i=0;typeof s[i]=="string";)i++;var u;switch(i){case s.length:this._processSimple(s.join("/"),d);return;case 0:u=null;break;default:u=s.slice(0,i).join("/");break}var t=s.slice(i),r;u===null?r=".":((w(u)||w(s.map(function(a){return typeof a=="string"?a:"[*]"}).join("/")))&&(!u||!w(u))&&(u="/"+u),r=u);var o=this._makeAbs(r);if(!I(this,r)){var e=t[0]===E.GLOBSTAR;e?this._processGlobStar(u,r,o,t,d,y):this._processReaddir(u,r,o,t,d,y)}},S.prototype._processReaddir=function(s,d,y,i,u,t){var r=this._readdir(y,t);if(r){for(var o=i[0],e=!!this.minimatch.negate,a=o._glob,f=this.dot||a.charAt(0)===".",h=[],c=0;c<r.length;c++){var n=r[c];if(n.charAt(0)!=="."||f){var l;e&&!s?l=!n.match(o):l=n.match(o),l&&h.push(n)}}var m=h.length;if(m!==0){if(i.length===1&&!this.mark&&!this.stat){this.matches[u]||(this.matches[u]=Object.create(null));for(var c=0;c<m;c++){var n=h[c];s&&(s.slice(-1)!=="/"?n=s+"/"+n:n=s+n),n.charAt(0)==="/"&&!this.nomount&&(n=k.join(this.root,n)),this._emitMatch(u,n)}return}i.shift();for(var c=0;c<m;c++){var n=h[c],v;s?v=[s,n]:v=[n],this._process(v.concat(i),u,t)}}}},S.prototype._emitMatch=function(s,d){if(!b(this,d)){var y=this._makeAbs(d);if(this.mark&&(d=this._mark(d)),this.absolute&&(d=y),!this.matches[s][d]){if(this.nodir){var i=this.cache[y];if(i==="DIR"||Array.isArray(i))return}this.matches[s][d]=!0,this.stat&&this._stat(d)}}},S.prototype._readdirInGlobStar=function(s){if(this.follow)return this._readdir(s,!1);var d,y;try{y=this.fs.lstatSync(s)}catch(u){if(u.code==="ENOENT")return null}var i=y&&y.isSymbolicLink();return this.symlinks[s]=i,!i&&y&&!y.isDirectory()?this.cache[s]="FILE":d=this._readdir(s,!1),d},S.prototype._readdir=function(s,d){if(d&&!A(this.symlinks,s))return this._readdirInGlobStar(s);if(A(this.cache,s)){var y=this.cache[s];if(!y||y==="FILE")return null;if(Array.isArray(y))return y}try{return this._readdirEntries(s,this.fs.readdirSync(s))}catch(i){return this._readdirError(s,i),null}},S.prototype._readdirEntries=function(s,d){if(!this.mark&&!this.stat)for(var y=0;y<d.length;y++){var i=d[y];s==="/"?i=s+i:i=s+"/"+i,this.cache[i]=!0}return this.cache[s]=d,d},S.prototype._readdirError=function(s,d){switch(d.code){case"ENOTSUP":case"ENOTDIR":var y=this._makeAbs(s);if(this.cache[y]="FILE",y===this.cwdAbs){var i=new Error(d.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=d.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(s)]=!1;break;default:if(this.cache[this._makeAbs(s)]=!1,this.strict)throw d;this.silent||console.error("glob error",d);break}},S.prototype._processGlobStar=function(s,d,y,i,u,t){var r=this._readdir(y,t);if(r){var o=i.slice(1),e=s?[s]:[],a=e.concat(o);this._process(a,u,!1);var f=r.length,h=this.symlinks[y];if(!(h&&t))for(var c=0;c<f;c++){var n=r[c];if(!(n.charAt(0)==="."&&!this.dot)){var l=e.concat(r[c],o);this._process(l,u,!0);var m=e.concat(r[c],i);this._process(m,u,!0)}}}},S.prototype._processSimple=function(s,d){var y=this._stat(s);if(this.matches[d]||(this.matches[d]=Object.create(null)),!!y){if(s&&w(s)&&!this.nomount){var i=/[\/\\]$/.test(s);s.charAt(0)==="/"?s=k.join(this.root,s):(s=k.resolve(this.root,s),i&&(s+="/"))}process.platform==="win32"&&(s=s.replace(/\\/g,"/")),this._emitMatch(d,s)}},S.prototype._stat=function(s){var d=this._makeAbs(s),y=s.slice(-1)==="/";if(s.length>this.maxLength)return!1;if(!this.stat&&A(this.cache,d)){var t=this.cache[d];if(Array.isArray(t)&&(t="DIR"),!y||t==="DIR")return t;if(y&&t==="FILE")return!1}var i=this.statCache[d];if(!i){var u;try{u=this.fs.lstatSync(d)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[d]=!1,!1}if(u&&u.isSymbolicLink())try{i=this.fs.statSync(d)}catch{i=u}else i=u}this.statCache[d]=i;var t=!0;return i&&(t=i.isDirectory()?"DIR":"FILE"),this.cache[d]=this.cache[d]||t,y&&t==="FILE"?!1:t},S.prototype._mark=function(s){return x.mark(this,s)},S.prototype._makeAbs=function(s){return x.makeAbs(this,s)},xe}var Se,rt;function vt(){if(rt)return Se;rt=1,Se=p;function p(E,k){if(E&&k)return p(E)(k);if(typeof E!="function")throw new TypeError("need wrapper function");return Object.keys(E).forEach(function(w){R[w]=E[w]}),R;function R(){for(var w=new Array(arguments.length),x=0;x<w.length;x++)w[x]=arguments[x];var D=E.apply(this,w),A=w[w.length-1];return typeof D=="function"&&D!==A&&Object.keys(A).forEach(function(I){D[I]=A[I]}),D}}return Se}var se={exports:{}},nt;function mt(){if(nt)return se.exports;nt=1;var p=vt();se.exports=p(E),se.exports.strict=p(k),E.proto=E(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return E(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return k(this)},configurable:!0})});function E(R){var w=function(){return w.called?w.value:(w.called=!0,w.value=R.apply(this,arguments))};return w.called=!1,w}function k(R){var w=function(){if(w.called)throw new Error(w.onceError);return w.called=!0,w.value=R.apply(this,arguments)},x=R.name||"Function wrapped with `once`";return w.onceError=x+" shouldn't be called more than once",w.called=!1,w}return se.exports}var be,it;function Ct(){if(it)return be;it=1;var p=vt(),E=Object.create(null),k=mt();be=p(R);function R(D,A){return E[D]?(E[D].push(A),null):(E[D]=[A],w(D))}function w(D){return k(function A(){var I=E[D],b=I.length,O=x(arguments);try{for(var S=0;S<b;S++)I[S].apply(null,O)}finally{I.length>b?(I.splice(0,b),process.nextTick(function(){A.apply(null,O)})):delete E[D]}})}function x(D){for(var A=D.length,I=[],b=0;b<A;b++)I[b]=D[b];return I}return be}var _e,at;function pt(){if(at)return _e;at=1,_e=i;var p=ht(),E=qe();E.Minimatch;var k=qt(),R=Ot.EventEmitter,w=W,x=je,D=Ne(),A=Nt(),I=dt(),b=I.setopts,O=I.ownProp,S=Ct(),s=I.childrenIgnored,d=I.isIgnored,y=mt();function i(e,a,f){if(typeof a=="function"&&(f=a,a={}),a||(a={}),a.sync){if(f)throw new TypeError("callback provided to sync glob");return A(e,a)}return new r(e,a,f)}i.sync=A;var u=i.GlobSync=A.GlobSync;i.glob=i;function t(e,a){if(a===null||typeof a!="object")return e;for(var f=Object.keys(a),h=f.length;h--;)e[f[h]]=a[f[h]];return e}i.hasMagic=function(e,a){var f=t({},a);f.noprocess=!0;var h=new r(e,f),c=h.minimatch.set;if(!e)return!1;if(c.length>1)return!0;for(var n=0;n<c[0].length;n++)if(typeof c[0][n]!="string")return!0;return!1},i.Glob=r,k(r,R);function r(e,a,f){if(typeof a=="function"&&(f=a,a=null),a&&a.sync){if(f)throw new TypeError("callback provided to sync glob");return new u(e,a)}if(!(this instanceof r))return new r(e,a,f);b(this,e,a),this._didRealPath=!1;var h=this.minimatch.set.length;this.matches=new Array(h),typeof f=="function"&&(f=y(f),this.on("error",f),this.on("end",function(v){f(null,v)}));var c=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(h===0)return m();for(var n=!0,l=0;l<h;l++)this._process(this.minimatch.set[l],l,!1,m);n=!1;function m(){--c._processing,c._processing<=0&&(n?process.nextTick(function(){c._finish()}):c._finish())}}r.prototype._finish=function(){if(x(this instanceof r),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();I.finish(this),this.emit("end",this.found)}},r.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var a=this,f=0;f<this.matches.length;f++)this._realpathSet(f,h);function h(){--e===0&&a._finish()}},r.prototype._realpathSet=function(e,a){var f=this.matches[e];if(!f)return a();var h=Object.keys(f),c=this,n=h.length;if(n===0)return a();var l=this.matches[e]=Object.create(null);h.forEach(function(m,v){m=c._makeAbs(m),p.realpath(m,c.realpathCache,function(_,j){_?_.syscall==="stat"?l[m]=!0:c.emit("error",_):l[j]=!0,--n===0&&(c.matches[e]=l,a())})})},r.prototype._mark=function(e){return I.mark(this,e)},r.prototype._makeAbs=function(e){return I.makeAbs(this,e)},r.prototype.abort=function(){this.aborted=!0,this.emit("abort")},r.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},r.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var a=0;a<e.length;a++){var f=e[a];this._emitMatch(f[0],f[1])}}if(this._processQueue.length){var h=this._processQueue.slice(0);this._processQueue.length=0;for(var a=0;a<h.length;a++){var c=h[a];this._processing--,this._process(c[0],c[1],c[2],c[3])}}}},r.prototype._process=function(e,a,f,h){if(x(this instanceof r),x(typeof h=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,a,f,h]);return}for(var c=0;typeof e[c]=="string";)c++;var n;switch(c){case e.length:this._processSimple(e.join("/"),a,h);return;case 0:n=null;break;default:n=e.slice(0,c).join("/");break}var l=e.slice(c),m;n===null?m=".":((D(n)||D(e.map(function(j){return typeof j=="string"?j:"[*]"}).join("/")))&&(!n||!D(n))&&(n="/"+n),m=n);var v=this._makeAbs(m);if(s(this,m))return h();var _=l[0]===E.GLOBSTAR;_?this._processGlobStar(n,m,v,l,a,f,h):this._processReaddir(n,m,v,l,a,f,h)}},r.prototype._processReaddir=function(e,a,f,h,c,n,l){var m=this;this._readdir(f,n,function(v,_){return m._processReaddir2(e,a,f,h,c,n,_,l)})},r.prototype._processReaddir2=function(e,a,f,h,c,n,l,m){if(!l)return m();for(var v=h[0],_=!!this.minimatch.negate,j=v._glob,M=this.dot||j.charAt(0)===".",$=[],g=0;g<l.length;g++){var P=l[g];if(P.charAt(0)!=="."||M){var T;_&&!e?T=!P.match(v):T=P.match(v),T&&$.push(P)}}var q=$.length;if(q===0)return m();if(h.length===1&&!this.mark&&!this.stat){this.matches[c]||(this.matches[c]=Object.create(null));for(var g=0;g<q;g++){var P=$[g];e&&(e!=="/"?P=e+"/"+P:P=e+P),P.charAt(0)==="/"&&!this.nomount&&(P=w.join(this.root,P)),this._emitMatch(c,P)}return m()}h.shift();for(var g=0;g<q;g++){var P=$[g];e&&(e!=="/"?P=e+"/"+P:P=e+P),this._process([P].concat(h),c,n,m)}m()},r.prototype._emitMatch=function(e,a){if(!this.aborted&&!d(this,a)){if(this.paused){this._emitQueue.push([e,a]);return}var f=D(a)?a:this._makeAbs(a);if(this.mark&&(a=this._mark(a)),this.absolute&&(a=f),!this.matches[e][a]){if(this.nodir){var h=this.cache[f];if(h==="DIR"||Array.isArray(h))return}this.matches[e][a]=!0;var c=this.statCache[f];c&&this.emit("stat",a,c),this.emit("match",a)}}},r.prototype._readdirInGlobStar=function(e,a){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,a);var f="lstat\0"+e,h=this,c=S(f,n);c&&h.fs.lstat(e,c);function n(l,m){if(l&&l.code==="ENOENT")return a();var v=m&&m.isSymbolicLink();h.symlinks[e]=v,!v&&m&&!m.isDirectory()?(h.cache[e]="FILE",a()):h._readdir(e,!1,a)}},r.prototype._readdir=function(e,a,f){if(!this.aborted&&(f=S("readdir\0"+e+"\0"+a,f),!!f)){if(a&&!O(this.symlinks,e))return this._readdirInGlobStar(e,f);if(O(this.cache,e)){var h=this.cache[e];if(!h||h==="FILE")return f();if(Array.isArray(h))return f(null,h)}var c=this;c.fs.readdir(e,o(this,e,f))}};function o(e,a,f){return function(h,c){h?e._readdirError(a,h,f):e._readdirEntries(a,c,f)}}return r.prototype._readdirEntries=function(e,a,f){if(!this.aborted){if(!this.mark&&!this.stat)for(var h=0;h<a.length;h++){var c=a[h];e==="/"?c=e+c:c=e+"/"+c,this.cache[c]=!0}return this.cache[e]=a,f(null,a)}},r.prototype._readdirError=function(e,a,f){if(!this.aborted){switch(a.code){case"ENOTSUP":case"ENOTDIR":var h=this._makeAbs(e);if(this.cache[h]="FILE",h===this.cwdAbs){var c=new Error(a.code+" invalid cwd "+this.cwd);c.path=this.cwd,c.code=a.code,this.emit("error",c),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",a),this.abort()),this.silent||console.error("glob error",a);break}return f()}},r.prototype._processGlobStar=function(e,a,f,h,c,n,l){var m=this;this._readdir(f,n,function(v,_){m._processGlobStar2(e,a,f,h,c,n,_,l)})},r.prototype._processGlobStar2=function(e,a,f,h,c,n,l,m){if(!l)return m();var v=h.slice(1),_=e?[e]:[],j=_.concat(v);this._process(j,c,!1,m);var M=this.symlinks[f],$=l.length;if(M&&n)return m();for(var g=0;g<$;g++){var P=l[g];if(!(P.charAt(0)==="."&&!this.dot)){var T=_.concat(l[g],v);this._process(T,c,!0,m);var q=_.concat(l[g],h);this._process(q,c,!0,m)}}m()},r.prototype._processSimple=function(e,a,f){var h=this;this._stat(e,function(c,n){h._processSimple2(e,a,c,n,f)})},r.prototype._processSimple2=function(e,a,f,h,c){if(this.matches[a]||(this.matches[a]=Object.create(null)),!h)return c();if(e&&D(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=w.join(this.root,e):(e=w.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(a,e),c()},r.prototype._stat=function(e,a){var f=this._makeAbs(e),h=e.slice(-1)==="/";if(e.length>this.maxLength)return a();if(!this.stat&&O(this.cache,f)){var c=this.cache[f];if(Array.isArray(c)&&(c="DIR"),!h||c==="DIR")return a(null,c);if(h&&c==="FILE")return a()}var n=this.statCache[f];if(n!==void 0){if(n===!1)return a(null,n);var l=n.isDirectory()?"DIR":"FILE";return h&&l==="FILE"?a():a(null,l,n)}var m=this,v=S("stat\0"+f,_);v&&m.fs.lstat(f,v);function _(j,M){if(M&&M.isSymbolicLink())return m.fs.stat(f,function($,g){$?m._stat2(e,f,null,M,a):m._stat2(e,f,$,g,a)});m._stat2(e,f,j,M,a)}},r.prototype._stat2=function(e,a,f,h,c){if(f&&(f.code==="ENOENT"||f.code==="ENOTDIR"))return this.statCache[a]=!1,c();var n=e.slice(-1)==="/";if(this.statCache[a]=h,a.slice(-1)==="/"&&h&&!h.isDirectory())return c(null,!1,h);var l=!0;return h&&(l=h.isDirectory()?"DIR":"FILE"),this.cache[a]=this.cache[a]||l,n&&l==="FILE"?c():c(null,l,h)},_e}var Oe,st;function Lt(){if(st)return Oe;st=1,Oe=b,b.sync=i;var p=je,E=W,k=X,R=pt(),w=parseInt("666",8),x={nosort:!0,silent:!0},D=0,A=process.platform==="win32";function I(r){var o=["unlink","chmod","stat","lstat","rmdir","readdir"];o.forEach(function(e){r[e]=r[e]||k[e],e=e+"Sync",r[e]=r[e]||k[e]}),r.maxBusyTries=r.maxBusyTries||3,r.emfileWait=r.emfileWait||1e3,r.glob===!1&&(r.disableGlob=!0),r.disableGlob=r.disableGlob||!1,r.glob=r.glob||x}function b(r,o,e){typeof o=="function"&&(e=o,o={}),p(r,"rimraf: missing path"),p.equal(typeof r,"string","rimraf: path should be a string"),p.equal(typeof e,"function","rimraf: callback function required"),p(o,"rimraf: invalid options argument provided"),p.equal(typeof o,"object","rimraf: options should be object"),I(o);var a=0,f=null,h=0;if(o.disableGlob||!R.hasMagic(r))return n(null,[r]);o.lstat(r,function(l,m){if(!l)return n(null,[r]);R(r,o.glob,n)});function c(l){f=f||l,--h===0&&e(f)}function n(l,m){if(l)return e(l);if(h=m.length,h===0)return e();m.forEach(function(v){O(v,o,function _(j){if(j){if((j.code==="EBUSY"||j.code==="ENOTEMPTY"||j.code==="EPERM")&&a<o.maxBusyTries){a++;var M=a*100;return setTimeout(function(){O(v,o,_)},M)}if(j.code==="EMFILE"&&D<o.emfileWait)return setTimeout(function(){O(v,o,_)},D++);j.code==="ENOENT"&&(j=null)}D=0,c(j)})})}}function O(r,o,e){p(r),p(o),p(typeof e=="function"),o.lstat(r,function(a,f){if(a&&a.code==="ENOENT")return e(null);if(a&&a.code==="EPERM"&&A&&S(r,o,a,e),f&&f.isDirectory())return d(r,o,a,e);o.unlink(r,function(h){if(h){if(h.code==="ENOENT")return e(null);if(h.code==="EPERM")return A?S(r,o,h,e):d(r,o,h,e);if(h.code==="EISDIR")return d(r,o,h,e)}return e(h)})})}function S(r,o,e,a){p(r),p(o),p(typeof a=="function"),e&&p(e instanceof Error),o.chmod(r,w,function(f){f?a(f.code==="ENOENT"?null:e):o.stat(r,function(h,c){h?a(h.code==="ENOENT"?null:e):c.isDirectory()?d(r,o,e,a):o.unlink(r,a)})})}function s(r,o,e){p(r),p(o),e&&p(e instanceof Error);try{o.chmodSync(r,w)}catch(f){if(f.code==="ENOENT")return;throw e}try{var a=o.statSync(r)}catch(f){if(f.code==="ENOENT")return;throw e}a.isDirectory()?u(r,o,e):o.unlinkSync(r)}function d(r,o,e,a){p(r),p(o),e&&p(e instanceof Error),p(typeof a=="function"),o.rmdir(r,function(f){f&&(f.code==="ENOTEMPTY"||f.code==="EEXIST"||f.code==="EPERM")?y(r,o,a):f&&f.code==="ENOTDIR"?a(e):a(f)})}function y(r,o,e){p(r),p(o),p(typeof e=="function"),o.readdir(r,function(a,f){if(a)return e(a);var h=f.length;if(h===0)return o.rmdir(r,e);var c;f.forEach(function(n){b(E.join(r,n),o,function(l){if(!c){if(l)return e(c=l);--h===0&&o.rmdir(r,e)}})})})}function i(r,o){o=o||{},I(o),p(r,"rimraf: missing path"),p.equal(typeof r,"string","rimraf: path should be a string"),p(o,"rimraf: missing options"),p.equal(typeof o,"object","rimraf: options should be object");var e;if(o.disableGlob||!R.hasMagic(r))e=[r];else try{o.lstatSync(r),e=[r]}catch{e=R.sync(r,o.glob)}if(e.length)for(var a=0;a<e.length;a++){var r=e[a];try{var f=o.lstatSync(r)}catch(c){if(c.code==="ENOENT")return;c.code==="EPERM"&&A&&s(r,o,c)}try{f&&f.isDirectory()?u(r,o,null):o.unlinkSync(r)}catch(c){if(c.code==="ENOENT")return;if(c.code==="EPERM")return A?s(r,o,c):u(r,o,c);if(c.code!=="EISDIR")throw c;u(r,o,c)}}}function u(r,o,e){p(r),p(o),e&&p(e instanceof Error);try{o.rmdirSync(r)}catch(a){if(a.code==="ENOENT")return;if(a.code==="ENOTDIR")throw e;(a.code==="ENOTEMPTY"||a.code==="EEXIST"||a.code==="EPERM")&&t(r,o)}}function t(r,o){p(r),p(o),o.readdirSync(r).forEach(function(c){i(E.join(r,c),o)});var e=A?100:1,a=0;do{var f=!0;try{var h=o.rmdirSync(r,o);return f=!1,h}finally{if(++a<e&&f)continue}}while(!0)}return Oe}var ke,ot;function $t(){if(ot)return ke;ot=1;var p=W,E=X,k=parseInt("0777",8);ke=R.mkdirp=R.mkdirP=R;function R(w,x,D,A){typeof x=="function"?(D=x,x={}):(!x||typeof x!="object")&&(x={mode:x});var I=x.mode,b=x.fs||E;I===void 0&&(I=k),A||(A=null);var O=D||function(){};w=p.resolve(w),b.mkdir(w,I,function(S){if(!S)return A=A||w,O(null,A);switch(S.code){case"ENOENT":if(p.dirname(w)===w)return O(S);R(p.dirname(w),x,function(s,d){s?O(s,d):R(w,x,O,d)});break;default:b.stat(w,function(s,d){s||!d.isDirectory()?O(S,A):O(null,A)});break}})}return R.sync=function w(x,D,A){(!D||typeof D!="object")&&(D={mode:D});var I=D.mode,b=D.fs||E;I===void 0&&(I=k),A||(A=null),x=p.resolve(x);try{b.mkdirSync(x,I),A=A||x}catch(S){switch(S.code){case"ENOENT":A=w(p.dirname(x),D,A),w(x,D,A);break;default:var O;try{O=b.statSync(x)}catch{throw S}if(!O.isDirectory())throw S;break}}return A},ke}var ut;function yt(){return ut||(ut=1,function(p,E){let k=X,R=W,w=_t,x=ce,D=Lt(),A=$t();ce.tmpdir();const I=D.sync;let b=R.resolve(x.tmpdir()),O=w.O_CREAT|w.O_TRUNC|w.O_RDWR|w.O_EXCL,S=function(g){if(typeof g=="function")return[void 0,g];var P,T=new Promise(function(q,N){P=function(){var L=Array.from(arguments),B=L.shift();process.nextTick(function(){B?N(B):L.length===1?q(L[0]):q(L)})}});return[T,P]};var s=function(g,P){var T=d(g,P),q=new Date,N=[T.prefix,q.getFullYear(),q.getMonth(),q.getDate(),"-",process.pid,"-",(Math.random()*4294967296+1).toString(36),T.suffix].join("");return R.join(T.dir||b,N)},d=function(g,P){var T={prefix:null,suffix:null};if(g)switch(typeof g){case"string":T.prefix=g;break;case"object":T=g;break;default:throw new Error("Unknown affix declaration: "+T)}else T.prefix=P;return T},y=!1,i=function(g){return y=g!==!1,p.exports},u=!1,t=[],r=[];function o(g){if(!y)return!1;a(),t.push(g)}function e(g){if(!y)return!1;a(),r.push(g)}function a(){if(!y)return!1;u||(process.addListener("exit",function(){try{l()}catch(g){throw console.warn("Fail to clean temporary files on exit : ",g),g}}),u=!0)}function f(){if(!y)return!1;for(var g=0,P;(P=t.shift())!==void 0;)I(P,{maxBusyTries:6}),g++;return g}function h(g){var P=S(g),T=P[0];if(g=P[1],!y)return g(new Error("not tracking")),T;var q=0,N=t.length;if(!N)return g(null,q),T;for(var L,B=function(G){if(N){if(G){g(G),N=0;return}else q++;N--,N||g(null,q)}};(L=t.shift())!==void 0;)D(L,{maxBusyTries:6},B);return T}function c(){if(!y)return!1;for(var g=0,P;(P=r.shift())!==void 0;)I(P,{maxBusyTries:6}),g++;return g}function n(g){var P=S(g),T=P[0];if(g=P[1],!y)return g(new Error("not tracking")),T;var q=0,N=r.length;if(!N)return g(null,q),T;for(var L,B=function(G){if(N){if(G){g(G,q),N=0;return}else q++;N--,N||g(null,q)}};(L=r.shift())!==void 0;)D(L,{maxBusyTries:6},B);return T}function l(){if(!y)return!1;var g=f(),P=c();return{files:g,dirs:P}}function m(g){var P=S(g),T=P[0];return g=P[1],y?(h(function(q,N){q?g(q,{files:N}):n(function(L,B){g(L,{files:N,dirs:B})})}),T):(g(new Error("not tracking")),T)}const v=(g,P)=>{const T=S(P),q=T[0];P=T[1];let N=s(g,"d-");return A(N,448,L=>{L||e(N),P(L,N)}),q},_=g=>{let P=s(g,"d-");return A.sync(P,448),e(P),P},j=(g,P)=>{const T=S(P),q=T[0];P=T[1];const N=s(g,"f-");return k.open(N,O,384,(L,B)=>{L||o(N),P(L,{path:N,fd:B})}),q},M=g=>{const P=s(g,"f-");let T=k.openSync(P,O,384);return o(P),{path:P,fd:T}},$=g=>{const P=s(g,"s-");let T=k.createWriteStream(P,{flags:O,mode:384});return o(P),T};E.dir=b,E.track=i,E.mkdir=v,E.mkdirSync=_,E.open=j,E.openSync=M,E.path=s,E.cleanup=m,E.cleanupSync=l,E.createWriteStream=$}(re,re.exports)),re.exports}var De,ct;function Gt(){if(ct)return De;ct=1;const p=Re.exec,E=yt(),k=X,R=Me(),w=W,{unlinkP:x,readAndUnlinkP:D}=R;function A(u={}){const t=r=>new Promise((o,e)=>{const a=r.length;if(a===0)return e(new Error("No displays detected try dropping screen option"));const f=a-1,h=u.screen||0;if(!Number.isInteger(h)||h<0||h>f){const _=f===0?"(valid choice is 0 or drop screen option altogether)":`(valid choice is an integer between 0 and ${f})`;return e(new Error(`Invalid choice of displayId: ${h} ${_}`))}const c=u.format||"jpg";let n,l;if(u.filename){const _=u.filename.lastIndexOf(".");l=_>=0?u.filename.slice(_):`.${c}`,n='"'+u.filename.replace(/"/g,'\\"')+'"'}else l=`.${c}`;const m=Array(h+1).fill(null).map(()=>E.path({suffix:l}));let v=[];u.filename&&(m[h]=n),v=m.slice(0,h+1),p("screencapture -x -t "+c+" "+v.join(" "),function(_,j){if(_)return e(_);u.filename?o(w.resolve(u.filename)):k.readFile(m[h],function(M,$){if(M)return e(M);Promise.all(v.map(x)).then(()=>o($)).catch(g=>e(g))})})});return y().then(r=>t(r))}const I=`
Graphics/Displays:

    Intel Iris:

      Chipset Model: Intel Iris
      Type: GPU
      Bus: Built-In
      VRAM (Dynamic, Max): 1536 MB
      Vendor: Intel (0x8086)
      Device ID: 0x0a2e
      Revision ID: 0x0009
      Displays:
        Color LCD:
          Display Type: Retina LCD
          Resolution: 2560 x 1600 Retina
          Retina: Yes
          Pixel Depth: 32-Bit Color (ARGB8888)
          Main Display: Yes
          Mirror: Off
          Online: Yes
          Built-In: Yes
        HP 22cwa:
          Resolution: 1920 x 1080 @ 60Hz (1080p)
          Pixel Depth: 32-Bit Color (ARGB8888)
          Display Serial Number: 6CM7201231
          Mirror: Off
          Online: Yes
          Rotation: Supported
          Television: Yes
`;function b(u){const t=[],r=/(\s*)(.*?):(.*)\n/g;let o;for(;(o=r.exec(u))!==null;)t.push({indent:o[1].length,key:o[2].trim(),value:o[3].trim()});return t}function O(u,t,r){let o;for(;o=r.shift();)if(o.value==="")if(u<o.indent){for(;o.key in t;)o.key+="_1";t[o.key]={},O(o.indent,t[o.key],r)}else{r.unshift(o);return}else{for(;o.key in t;)o.key+="_1";t[o.key]=o.value}}function S(u){const t=u.filter(o=>o.primary),r=u.filter(o=>!o.primary);return[...t,...r]}function s(u){let t=0;return u.map(r=>Object.assign({},r,{id:t++}))}function d(u){const t={};if(O(-1,t,b(u)),!t["Graphics/Displays"])return[];const r=Object.keys(t["Graphics/Displays"]);if(!r||r.length<=0)return[];let o=[];return r.forEach(e=>{const a=t["Graphics/Displays"][e];if(a.Displays){const f=Object.entries(a.Displays).map(([h,c])=>{const n=c["Main Display"]==="Yes";return{name:h,primary:n}});o=o.concat(f)}}),s(S(o))}function y(){return new Promise((u,t)=>{p("system_profiler SPDisplaysDataType",(r,o)=>{if(r)return t(r);u(d(o))})})}function i(){return new Promise((u,t)=>{y().then(r=>{const o=r.map(()=>E.path({suffix:".jpg"}));p("screencapture -x -t jpg "+o.join(" "),function(e,a){if(e)return t(e);Promise.all(o.map(D)).then(u).catch(t)})})})}return A.listDisplays=y,A.all=i,A.parseDisplaysOutput=d,A.EXAMPLE_DISPLAYS_OUTPUT=I,De=A,De}var Ae,ft;function Bt(){if(ft)return Ae;ft=1;const p=Re.exec,E=yt(),k=W,R=Me(),w=X,x=ce,{readAndUnlinkP:D,defaultAll:A}=R;function I(){const d=k.join(x.tmpdir(),"screenCapture","screenCapture_1.3.2.bat"),y=k.join(x.tmpdir(),"screenCapture","app.manifest"),i=k.join(__dirname,"screenCapture_1.3.2.bat").replace("app.asar","app.asar.unpacked"),u=k.join(__dirname,"app.manifest").replace("app.asar","app.asar.unpacked");if(!w.existsSync(d)){const t=k.join(x.tmpdir(),"screenCapture");w.existsSync(t)||w.mkdirSync(t);const r={bat:w.readFileSync(i),manifest:w.readFileSync(u)};w.writeFileSync(d,r.bat),w.writeFileSync(y,r.manifest)}return d}function b(d={}){return new Promise((y,i)=>{const u=d.screen,t=d.format||"jpg",r=E.path({suffix:`.${t}`}),o=k.resolve(d.filename||r),e=u?` /d "${u}"`:"",a=I();p('"'+a+'" "'+o+'" '+e,{cwd:k.join(x.tmpdir(),"screenCapture"),windowsHide:!0},(f,h)=>{if(f)return i(f);d.filename?y(o):D(r).then(y).catch(i)})})}const O=`\r
C:\\Users\\devetry\\screenshot-desktop\\lib\\win32>//  2>nul  || \r
\\.\\DISPLAY1;0;1920;1080;0\r
\\.\\DISPLAY2;0;3840;1080;1920\r
`;function S(d){const y=/2>nul {2}\|\| /,{0:i,index:u}=y.exec(d);return d.slice(u+i.length).split(`
`).map(t=>t.replace(/[\n\r]/g,"")).map(t=>t.match(/(.*?);(.?\d+);(.?\d+);(.?\d+);(.?\d+);(.?\d*[\.,]?\d+)/)).filter(t=>t).map(t=>({id:t[1],name:t[1],top:+t[2],right:+t[3],bottom:+t[4],left:+t[5],dpiScale:+t[6].replace(",",".")})).map(t=>Object.assign(t,{height:t.bottom-t.top,width:t.right-t.left}))}function s(){return new Promise((d,y)=>{const i=I();p('"'+i+'" /list',{cwd:k.join(x.tmpdir(),"screenCapture")},(u,t)=>{if(u)return y(u);d(S(t))})})}return b.listDisplays=s,b.availableDisplays=s,b.parseDisplaysOutput=S,b.EXAMPLE_DISPLAYS_OUTPUT=O,b.all=()=>A(b),Ae=b,Ae}var lt;function Ft(){return lt||(lt=1,process.platform==="linux"?V.exports=Pt():process.platform==="darwin"?V.exports=Gt():process.platform==="win32"?V.exports=Bt():V.exports=function(){return Promise.reject(new Error("Currently unsupported platform. Pull requests welcome!"))}),V.exports}var Ut=Ft();const Yt=At(Ut);let C=null,Pe=!0,oe=[];function gt(){const{width:p,height:E}=U.screen.getPrimaryDisplay().workAreaSize,k=900,R=900,w=Math.floor((p-k)/2),x=Math.floor((E-R)/2);C=new U.BrowserWindow({width:k,height:R,x:w,y:x,transparent:!0,frame:!1,alwaysOnTop:!0,skipTaskbar:!0,resizable:!1,hasShadow:!1,webPreferences:{preload:Ie.join(__dirname,"preload.js"),nodeIntegration:!0,contextIsolation:!1}}),C.setIgnoreMouseEvents(!1),C.setContentProtection(!0),C.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0}),C.loadFile(Ie.join(__dirname,"../index.html")),Wt()}function Wt(){U.globalShortcut.register("F2",()=>{C&&(Pe=!Pe,Pe?(C.show(),C.setOpacity(1),C.setIgnoreMouseEvents(!1)):(C.setOpacity(0),C.setIgnoreMouseEvents(!0,{forward:!0})))}),U.globalShortcut.register("F4",()=>{oe=[],C==null||C.webContents.send("cleared")}),U.globalShortcut.register("Up",()=>ue(0,-10)),U.globalShortcut.register("Down",()=>ue(0,10)),U.globalShortcut.register("Left",()=>ue(-10,0)),U.globalShortcut.register("Right",()=>ue(10,0)),U.globalShortcut.register("Control+Z",async()=>{oe.length>=3||C&&(C.setOpacity(0),C.setIgnoreMouseEvents(!0,{forward:!0}),setTimeout(async()=>{try{const p=await Yt(),E=Ie.join(Dt.tmpdir(),`ss-${Date.now()}.jpg`);kt.writeFileSync(E,p),oe.push(E),C==null||C.webContents.send("screenshot",E)}catch(p){console.error("Screenshot failed:",p)}finally{C==null||C.setOpacity(1),C==null||C.setIgnoreMouseEvents(!1)}},300))}),U.globalShortcut.register("Control+I",()=>{C==null||C.webContents.send("show-input")}),U.globalShortcut.register("Control+X",()=>{C==null||C.webContents.send("send-to-api",oe)})}function ue(p,E){if(!C)return;const k=C.getBounds();C.setBounds({x:k.x+p,y:k.y+E,width:k.width,height:k.height})}U.app.whenReady().then(gt);U.app.on("window-all-closed",()=>{process.platform!=="darwin"&&U.app.quit()});U.app.on("activate",()=>{U.BrowserWindow.getAllWindows().length===0&&gt()});U.app.on("will-quit",()=>{U.globalShortcut.unregisterAll()});
